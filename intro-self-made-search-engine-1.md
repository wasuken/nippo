# 検索エンジン自作入門～手を動かしながら見渡す検索の舞台裏

[検索エンジン自作入門～手を動かしながら見渡す検索の舞台裏 | 山田浩之, 末永匡 | 工学 | Kindleストア | Amazon](https://www.amazon.co.jp/dp/B00NUZ32MU/ref=dp-kindle-redirect?_encoding=UTF8&btkr=1)

やっていき。

## 一章

### 検索エンジンの構成

* この本では検索エンジンとは**全文検索エンジン**を指す。

#### コンポーネント

一般的に以下の四つから構成されている。

##### Indexer

検索対象のテキストからインデックスを作成する。

私が見たことあるやつだと、形態素まで分解した上で、スコアリングしたりしてた。

スコアリングは別の箇所でやってたのかな？

##### Index Manager

索引をもつ箇所。Indexerから解析した結果を受け取って保存したり、

検索時にIndex Searcherへデータを渡したりもする。

保存時にデータを圧縮したりするテクニックとかある。

##### Index Searcher

インデックスを用いて、検索処理を行う。

大体のやつは、検索クエリに応じて、Index Managerに保存してあるスコアリングしたものを産出して、

スコアの降順に結果を分割して返す。

##### Document Manager

文字通り検索対象のドキュメントを保存するコンポーネント。データベース。

#### その他、付随するコンポーネント

##### クローラ

文書を集めるやつ。

Googleの検索エンジンで言うところの、ウェブ上の文書を収集するシステム。

##### ランキングシステム

検索対象をスコアリングするシステムと書いてあった。

あれ、これIndexerの役割じゃないの。まあいいか。

まあ切り離しといたほうがいいか。アルゴリズム次第だろうし。

### 高速化実現のためのインデックスの仕組み

#### grep型探索

文字通り全文を検索する。確実だろうけど遅い。

文字列の全操作の方法にもKMPやらBM法やらがある。

KMP->

[クヌース–モリス–プラット法 - Wikipedia](https://ja.wikipedia.org/wiki/%E3%82%AF%E3%83%8C%E3%83%BC%E3%82%B9%E2%80%93%E3%83%A2%E3%83%AA%E3%82%B9%E2%80%93%E3%83%97%E3%83%A9%E3%83%83%E3%83%88%E6%B3%95)

BM->

[ボイヤー-ムーア文字列検索アルゴリズム - Wikipedia](https://ja.wikipedia.org/wiki/%E3%83%9C%E3%82%A4%E3%83%A4%E3%83%BC-%E3%83%A0%E3%83%BC%E3%82%A2%E6%96%87%E5%AD%97%E5%88%97%E6%A4%9C%E7%B4%A2%E3%82%A2%E3%83%AB%E3%82%B4%E3%83%AA%E3%82%BA%E3%83%A0)

#### インデックスを用いる方法

事前にインデックスを作成して、それを使って検索を行う方法。

大量の文書の検索時にもそんなに検索速度が変わらないのが良いところ。

大体の検索エンジンがこれを使ってる。

GoogleやYahooは転置インデックスを使っているらしい。

##### 転置インデックスの仕組み

書籍の索引と同じ。
